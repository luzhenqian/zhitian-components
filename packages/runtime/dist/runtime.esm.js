import t from"@/packages/reactivity/src";let e={};function n(t,n,...i){const s=typeof t;let o;return"function"===s?(null===n&&(n={}),e=new t(n,...i),o=e.el):"string"===s&&(o=function(t,e,n,...i){let s=document.createElement(t);e&&Object.keys(e).forEach((t=>{"on"===t.slice(0,2)?"function"==typeof e[t]?s.addEventListener(t.slice(2).toLowerCase(),e[t]):n.methods&&s.addEventListener(t.slice(2).toLowerCase(),n.methods[e[t]].bind(n)):s.setAttribute(t,e[t])}));i.length>0&&s.append(...i);return s}(t,n,e,...i)),o}class i{constructor(t){this.props=t,this.name=this.constructor.name,this.initState(),this.initEl(),this.mount()}initState(){const e=Object.create(null),n=new t(this.update.bind(this));this.state=n.reactive(e),setTimeout(function(){for(let t in this){const e=this[t];"function"!=typeof e&&"el"!==t&&"name"!==t&&"state"!==t&&"props"!==t&&(this.state[t]=e)}}.bind(this))}initEl(){this.el=this.render(this.props,this.state)}mount(t){this.beforeMount&&this.beforeMount(this.props),t&&t.appendChild(this.el),!this._styleMounted&&this._styleMount&&this._styleMount(),this.mounted&&this.mounted(this.props)}unMount(){this.el.parentElement&&this.el.parentElement.removeChild(this.el)}update(){if(!this.el)return;const t=this.el.parentElement;this.unMount(),this.el=this.render(this.props),this.mount(t),h()}emit(t,...e){const n=this.props[t];if("function"===(this.props[t],!1))throw Error(`${t} is not a function`);n(...e)}}function s(t,e){t.append(e),h()}let o=[];function r(t){o.push(t)}function h(){o.forEach(((t,e)=>{t()})),o=[]}i.render=s,i.nextTick=h,i.doNextTickCbFn=h;export{i as ZTC,n as createElement,r as nextTick,s as render};
